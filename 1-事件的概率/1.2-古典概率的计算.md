# 古典概率的计算

## 一. 公式

### 1. $A_n^m = n(n-1)(n-2)...(n-m+1)$

和组合不同，排列要考虑位置顺序，第一个位置有 n 种可能，排好后第二个位置就只剩下 n - 1 种可能了，以此类推。

排到第m个位置，剩下的为什么不是 n - m 而是 n - m + 1 呢？因为是从0开始的，第一个因子 n 可以看作是 n - 0 ，第一个位置是 n - 0，第二个位置是 n - 1，第m个位置自然就是 n - (m - 1) 了。

### 2. $C_n^m = A_n^m / A_m^m$

把分母乘到左边，$C_n^m \times A_m^m = A_n^m$，意思是，$A_n^m$ 可以理解成两个步骤，先从 n 个里面拿 m 个，再将这 m 个全排列。

### 3. $C_n^m = n!/m!(n-m)!$

将公式 1 代入公式 2，然后分子分母同时乘以 (n - m)!。

### 4. $2^n = C_n^0 + C_n^1 + C_n^2 + ... + C_n^n$

组合数，也叫二次项系数，原因是 $(a + b)^n = \sum_{n}^i C_n^i a^i b^{n-i}$，在这个公式里，令 a = b = 1，就可以得到公式4，令a = - b，就可以得到下面的公式 5.

### 5. $0 = C_n^0 - C_n^1 + C_n^2 - C_n^3 + C_n^4 -...+{(-1)}^{n-1} \times C_n^n$

### 6. $C_{m+n}^k = \sum_{i=0}^k  C_m^i * C_n^{k - i}$

$(1 + x)^{m + n} = (1 + x)^m \times (1 + x)^n$，取 x 的 k 次方，那么左边式子要从 m + n 里选 k 个 x，右边式子里两个式子共同凑出 k 个 x，如果左因子全取1，右边因子就要取 k 个 x，若左因子取一个 x，右因子就要有 k - 1 个 x，以此类推。

### 7. $n!/r_1!r_2!...r_k!$

n 个物品，分 k 堆，堆和堆之间有位置之分，第 i 堆有 $r_i$ 个物品。原理就是组合数，后一个分式的分子和前一个分式的分母抵消。

## 二. 应用

### 1. 抽n个样品，恰好m个废品的概率（样品共N个，废品共M个）

不要漏算 $C_{N-M}^{n-m}$

### 2. 2n个鞋子，分n堆，都成对的概率

试验所有基本事件数：$(2n)!/2^n$

事件所有基本事件数：$n!$

### 3. 男女不相邻（直线，男m，女n）

1. 先排男：$m!$

2. 再插女：$A_{m+1}^n$

3. 概率为：${m!A_{m+1}^n}/A_{m+n}^{m+n}$

### 4. 男女不相邻（圈排列，男m，女n）

1. 先排男：$m!/m$

圆排列 123，231，312 都是一样的，所以要去掉（通过除法来去掉）队列长度，比如这里 1 有三个位置的可能。考虑了 1 就相当于考虑了 2 和 3 了。

2. 再插女：$A_{m}^n$

为什么这里又不用除以 m 呢？因为排男的时候已经让整个环不会重复了，所以女的单独重复无所谓，男的不重复，男女合在一起的环就不重复了，如果再除去重复的女环，就会少考虑部分情况。所以要么女环不重复，要么男环不重复，其一即可，多了都是错的。

3. 概率为：${m!/mA_{m}^n}/A_{m+n}^{m+n}/{m+n}$

### 5. 口袋有 2 盒烟，分别 n 支，每次随机一盒一支，“有一次一盒空了，另外一盒还剩 m 支烟”的概率

这题关键在设置具体场景，假设两盒烟分别记为甲乙，事件是否发生要摸到第2n-m+1（要多摸一次，最后一次是摸甲乙其中一盒的剩下的m支烟）次才知道。

所以事件的基本事件数为 $2C_{2n-m+1}^n$，每次摸有可能摸甲，也有可能摸乙，所以试验总基本事件数为 $2^{2n-m+1}$

### 6. 21 本不同的书，分 17 人，事件“6 人 0 本，5 人 1 本，2 人 2 本，4 人 3 本”的概率

关键在选择主体的选择，如果选择人作为选择主体，第一个人有选 0 到 21 本可能，后面的人能选多少书也会被前者影响。

选择书作为选择主体，书去选人，每本书都是 1 到 17 个人 17 种可能性，前后不受影响。总共基本事件数为 $17^21$。

然后分书的时候，注意很容易因为不写组合数（因为等于1，所以忽略）而漏了后续书的分配。

事件基本事件数为：$C_{17}^6C_{11}^5C_{21}^1C_{20}^1C_{19}^1C_{18}^1C_{17}^1C_6^2C_{16}^2C_{14}^2C_{12}^3C_9^3C_6^3$

### 7. n 本书分甲乙两人，甲乙各自至少 1 本的概率

书为主体，共 $2^n$ 种可能，反面考虑，全给了甲或全给了乙的概率为 $2 \times 1/2^n$，所以该题所求概率为：$1-1/2^{n-1}$
